# 评论功能使用说明

## 功能概述

新增的评论功能为小红书应用提供了完整的评论交互体验，包括：

### 🎯 核心功能
- ✅ 评论列表展示
- ✅ 添加新评论
- ✅ 回复评论功能
- ✅ 评论点赞/取消点赞
- ✅ 实时评论数量更新
- ✅ 响应式移动端适配

### 📱 用户交互
1. **查看评论**：在帖子详情页底部查看所有评论
2. **发表评论**：在评论框中输入内容，点击"发布"按钮
3. **快捷发布**：使用 `Ctrl/Cmd + Enter` 快速发布评论
4. **回复评论**：点击任意评论下的"回复"按钮
5. **取消回复**：按 `ESC` 键或点击回复横幅中的"✕"按钮
6. **点赞评论**：点击评论旁的心形图标
7. **跳转评论**：在详情页点击评论按钮自动滚动到评论区

### 🎨 设计特色
- **头像系统**：每个用户都有随机分配的emoji头像
- **时间显示**：智能时间格式化（刚刚、几分钟前、几小时前等）
- **字符限制**：评论内容最多500字符，实时显示计数
- **加载动画**：发布评论时显示加载状态
- **空状态**：没有评论时显示友好提示
- **滚动优化**：新评论发布后自动滚动到底部

### 🔧 技术实现
- **状态管理**：使用自定义Hook `useComments` 管理评论数据
- **数据模拟**：内存中存储，页面刷新后重新生成
- **响应式设计**：完美适配手机、平板、桌面设备
- **可访问性**：支持键盘导航和屏幕阅读器

### 📂 文件结构
```
src/
├── components/
│   ├── Comments.jsx          # 评论组件主体
│   ├── Comments.css          # 评论组件样式
│   └── PostDetail.jsx        # 集成了评论功能的详情页
├── hooks/
│   └── useComments.js        # 评论管理Hook
```

### 🎮 使用方法

在PostDetail组件中已经集成了评论功能：

```jsx
import Comments from './Comments';

// 在组件中使用
<Comments 
  postId={post.id}
  initialComments={commentsData}
  onCommentAdd={handleCommentAdd}
/>
```

### 🚀 特性说明

#### 评论数据结构
```js
{
  id: number,              // 评论唯一ID
  content: string,         // 评论内容
  author: string,          // 作者名称
  userId: number,          // 用户ID（用于头像）
  createTime: string,      // 创建时间（ISO字符串）
  likes: number,           // 点赞数
  isLiked: boolean,        // 是否已点赞
  replyTo: object|null     // 回复的目标评论
}
```

#### 回复功能
- 点击"回复"按钮后，输入框会自动填入 `@用户名 `
- 发布的回复会显示"回复 @用户名"标识
- 支持嵌套回复显示

#### 移动端优化
- 触摸友好的按钮尺寸（最小44px）
- 自适应文本输入框高度
- 优化的滚动体验
- 简化的操作界面

### 🎨 样式定制

评论组件使用设计系统中的CSS变量，可以轻松定制：
- 颜色主题跟随全局设计系统
- 支持暗色模式
- 支持高对比度模式
- 响应式断点适配

### 🔮 未来扩展

当前实现为基础版本，后续可以扩展：
- [ ] 评论排序（时间、热度）
- [ ] 评论图片上传
- [ ] @用户功能
- [ ] 评论举报功能
- [ ] 评论删除功能
- [ ] 评论编辑功能
- [ ] 评论分页加载

## 体验地址

启动开发服务器后，访问任意帖子详情页即可体验完整的评论功能：

```bash
npm run dev
```

然后点击任意帖子卡片进入详情页，滚动到底部即可看到评论区域。